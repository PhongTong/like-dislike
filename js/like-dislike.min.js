/**
 * like-dislike.js jQuery plugin
 * Copyright 2016, Maxim Tkachuk, mxtkachuk@gmail.com
 * Licensed under the MIT license
 */
!function(l){var s="like",i="dislike",t={init:function(n){this.opts=l.extend(!0,{},l.fn.likeDislike.defaults,n);var e=this.opts;if(this.btns=l(this).find("."+e.likeBtnClass+", ."+e.dislikeBtnClass),this.readOnly=t.readOnly,e.readOnly=!e.readOnly,this.readOnly(!e.readOnly),0!==e.initialValue){var a=1===e.initialValue?s:i;t._btnDown.call(this,a)}return this},readOnly:function(l){var s=this.opts;if(s.readOnly!==l){var i=this.btns;if(s.readOnly=l,l)t._unbind.call(this,i);else{if(!s.reverseMode){var n=i.not("."+s.activeClass);n.length&&(i=n)}t._bind.call(this,i)}}},_btnDown:function(l){var s=t._getBtnByType.call(this,l);s.addClass(this.opts.activeClass),this.opts.reverseMode||t._unbind.call(this,s)},_btnUp:function(l){var s=t._getBtnByType.call(this,l);this.opts.reverseMode||t._bind.call(this,s),s.removeClass(this.opts.activeClass)},_getBtnByType:function(t){return t===s?l(this).find("."+this.opts.likeBtnClass):t===i?l(this).find("."+this.opts.dislikeBtnClass):void l.error("Wrong button type: "+t)},_bind:function(n){var e=this,a=e.opts;n.removeClass(a.disabledClass),n.bind("click",function(n){var r=l(this),o=!(a.beforeClick&&!a.beforeClick.call(e,n));if(o){var c=r.hasClass(a.likeBtnClass)?s:i,d=e.btns.hasClass(a.activeClass),b=r.hasClass(a.activeClass),h=0;a.reverseMode?c===s?b?t._btnUp.call(e,s):(t._btnUp.call(e,i),t._btnDown.call(e,s),h=1):b?t._btnUp.call(e,i):(t._btnUp.call(e,s),t._btnDown.call(e,i),h=-1):c===s?d?(t._btnUp.call(e,i),t._btnDown.call(e,s),h=b?0:1):(t._btnDown.call(e,s),h=1):d?(t._btnUp.call(e,s),t._btnDown.call(e,i),h=b?0:-1):(t._btnDown.call(e,i),h=-1),a.click.call(e,h,c,n)}})},_unbind:function(l){l.addClass(this.opts.disabledClass),l.unbind()}};l.fn.likeDislike=function(s){return t[s]?t[s].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof s&&s?void l.error("Method "+s+" does not exist!"):t.init.apply(this,arguments)},l.fn.likeDislike.defaults={click:null,beforeClick:null,initialValue:0,readOnly:!1,reverseMode:!1,likeBtnClass:"like",dislikeBtnClass:"dislike",activeClass:"active",disabledClass:"disabled"}}(jQuery);